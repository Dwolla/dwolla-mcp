/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { fundingSourcesGet } from "../../funcs/fundingSourcesGet.js";
import { GetFundingSourceRequest$zodSchema } from "../../models/getfundingsourceop.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: GetFundingSourceRequest$zodSchema,
};

export const tool$fundingSourcesGet: ToolDefinition<typeof args> = {
  name: "funding-sources-get",
  description: `Retrieve a funding source

Returns detailed information for a specific funding source, including its type, status, and verification details. Supports bank accounts (via Open Banking), debit card funding sources, and Dwolla balance (verified customers only). Debit card funding sources include masked card details such as brand, last four digits, expiration date, and cardholder name.`,
  scopes: ["read"],
  annotations: {
    "title": "",
    "destructiveHint": false,
    "idempotentHint": false,
    "openWorldHint": false,
    "readOnlyHint": false,
  },
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await fundingSourcesGet(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
