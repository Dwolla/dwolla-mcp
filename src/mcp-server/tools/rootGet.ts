/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { rootGet } from "../../funcs/rootGet.js";
import { formatResult, ToolDefinition } from "../tools.js";

export const tool$rootGet: ToolDefinition = {
  name: "root-get",
  description: `root

Retrieve the API root entry point to discover available resources and endpoints based on your OAuth access token permissions. Returns HAL+JSON with navigation links to accessible resources including accounts, customers, events, and webhook subscriptions depending on token scope. Essential for API exploration, dynamic resource discovery, and building adaptive client applications that respond to available permissions.`,
  scopes: ["read"],
  tool: async (client, ctx) => {
    const [result, apiCall] = await rootGet(
      client,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
